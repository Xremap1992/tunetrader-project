<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TuneTrader - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .register-container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px;
            width: 100%;
            max-width: 500px;
            box-shadow: 0 8px 32px rgba(31, 38, 135, 0.37);
            border: 1px solid rgba(255, 255, 255, 0.18);
            color: white;
        }
        .logo {
            text-align: center;
            margin-bottom: 30px;
        }
        .logo h1 {
            color: #4CAF50;
            font-size: 2.5rem;
            margin: 0;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        .register-header {
            text-align: center;
            margin-bottom: 30px;
        }
        .register-header h2 {
            margin: 0 0 10px 0;
            font-size: 2rem;
            color: white;
        }
        .register-header p {
            margin: 0;
            opacity: 0.9;
            font-size: 1.1rem;
        }
        .form-group {
            margin-bottom: 20px;
        }
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #f39c12;
        }
        .form-group input, .form-group select {
            width: 100%;
            padding: 15px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 1rem;
            transition: border-color 0.3s ease;
            box-sizing: border-box;
        }
        .form-group input::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }
        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: #4CAF50;
            box-shadow: 0 0 10px rgba(76, 175, 80, 0.3);
        }
        .form-group select {
            cursor: pointer;
        }
        .form-group select option {
            background: #2c3e50;
            color: white;
        }
        .password-requirements {
            font-size: 0.9rem;
            opacity: 0.8;
            margin-top: 5px;
            line-height: 1.4;
        }
        .register-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(45deg, #4CAF50, #45a049);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            margin-top: 10px;
        }
        .register-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(76, 175, 80, 0.4);
        }
        .register-btn:disabled {
            background: #7f8c8d;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        .login-link {
            text-align: center;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.2);
        }
        .login-link a {
            color: #4CAF50;
            text-decoration: none;
            font-weight: bold;
        }
        .login-link a:hover {
            text-decoration: underline;
        }
        .error-message {
            background: rgba(231, 76, 60, 0.2);
            border: 1px solid #e74c3c;
            color: #e74c3c;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 20px;
            display: none;
        }
        .success-message {
            background: rgba(46, 204, 113, 0.2);
            border: 1px solid #2ecc71;
            color: #2ecc71;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 20px;
            display: none;
        }
        .loading {
            display: none;
            text-align: center;
            margin-top: 10px;
        }
        .loading::after {
            content: '';
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 50%;
            border-top-color: #4CAF50;
            animation: spin 1s ease-in-out infinite;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        @media (max-width: 600px) {
            .register-container {
                margin: 20px;
                padding: 30px 20px;
            }
            .form-row {
                grid-template-columns: 1fr;
                gap: 0;
            }
        }
    </style>
</head>
<body>
    <div class="register-container">
        <div class="logo">
            <h1>üöó TuneTrader</h1>
        </div>
        
        <div class="register-header">
            <h2>–°—ä–∑–¥–∞–π –∞–∫–∞—É–Ω—Ç</h2>
            <p>–ü—Ä–∏—Å—ä–µ–¥–∏–Ω–∏ —Å–µ –∫—ä–º –Ω–∞–π-–≥–æ–ª—è–º–∞—Ç–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –∑–∞ ECU —Ç—É–Ω–∏–Ω–≥</p>
        </div>

        <div id="errorMessage" class="error-message"></div>
        <div id="successMessage" class="success-message"></div>

        <form id="registerForm">
            <div class="form-row">
                <div class="form-group">
                    <label for="firstName">–ò–º–µ *</label>
                    <input type="text" id="firstName" name="firstName" placeholder="–í—ä–≤–µ–¥–µ—Ç–µ –∏–º–µ" required>
                </div>
                <div class="form-group">
                    <label for="lastName">–§–∞–º–∏–ª–∏—è *</label>
                    <input type="text" id="lastName" name="lastName" placeholder="–í—ä–≤–µ–¥–µ—Ç–µ —Ñ–∞–º–∏–ª–∏—è" required>
                </div>
            </div>

            <div class="form-group">
                <label for="email">Email –∞–¥—Ä–µ—Å *</label>
                <input type="email" id="email" name="email" placeholder="your@email.com" required>
            </div>

            <div class="form-group">
                <label for="phone">–¢–µ–ª–µ—Ñ–æ–Ω</label>
                <input type="tel" id="phone" name="phone" placeholder="+359 888 123 456">
            </div>

            <div class="form-group">
                <label for="role">–¢–∏–ø –∞–∫–∞—É–Ω—Ç *</label>
                <select id="role" name="role" required>
                    <option value="">–ò–∑–±–µ—Ä–µ—Ç–µ —Ç–∏–ø –∞–∫–∞—É–Ω—Ç</option>
                    <option value="client">–ö–ª–∏–µ–Ω—Ç - –ò—Å–∫–∞–º –¥–∞ —Ç—É–Ω–∏–Ω–≥–≤–∞–º –º–æ—è –∞–≤—Ç–æ–º–æ–±–∏–ª</option>
                    <option value="tuner">–¢—É–Ω–µ—Ä - –ü—Ä–µ–¥–ª–∞–≥–∞–º —Ç—É–Ω–∏–Ω–≥ —É—Å–ª—É–≥–∏</option>
                </select>
            </div>

            <div class="form-group">
                <label for="password">–ü–∞—Ä–æ–ª–∞ *</label>
                <input type="password" id="password" name="password" placeholder="–°—ä–∑–¥–∞–π—Ç–µ —Å–∏–≥—É—Ä–Ω–∞ –ø–∞—Ä–æ–ª–∞" required>
                <div class="password-requirements">
                    –ü–∞—Ä–æ–ª–∞—Ç–∞ —Ç—Ä—è–±–≤–∞ –¥–∞ —Å—ä–¥—ä—Ä–∂–∞ –ø–æ–Ω–µ 8 —Å–∏–º–≤–æ–ª–∞, –≤–∫–ª—é—á–∏—Ç–µ–ª–Ω–æ –≥–ª–∞–≤–Ω–∞ –±—É–∫–≤–∞, –º–∞–ª–∫–∞ –±—É–∫–≤–∞ –∏ —Ü–∏—Ñ—Ä–∞
                </div>
            </div>

            <div class="form-group">
                <label for="confirmPassword">–ü–æ—Ç–≤—ä—Ä–¥–∏ –ø–∞—Ä–æ–ª–∞ *</label>
                <input type="password" id="confirmPassword" name="confirmPassword" placeholder="–ü–æ–≤—Ç–æ—Ä–µ—Ç–µ –ø–∞—Ä–æ–ª–∞—Ç–∞" required>
            </div>

            <div class="form-group" id="companyGroup" style="display: none;">
                <label for="company">–§–∏—Ä–º–∞/–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è</label>
                <input type="text" id="company" name="company" placeholder="–ò–º–µ –Ω–∞ —Ñ–∏—Ä–º–∞—Ç–∞ (–ø–æ –∏–∑–±–æ—Ä)">
            </div>

            <div class="form-group" id="experienceGroup" style="display: none;">
                <label for="experience">–û–ø–∏—Ç –≤ —Ç—É–Ω–∏–Ω–≥–∞</label>
                <select id="experience" name="experience">
                    <option value="">–ò–∑–±–µ—Ä–µ—Ç–µ –Ω–∏–≤–æ –Ω–∞ –æ–ø–∏—Ç</option>
                    <option value="beginner">–ù–∞—á–∏–Ω–∞–µ—â (–ø–æ–¥ 1 –≥–æ–¥–∏–Ω–∞)</option>
                    <option value="intermediate">–°—Ä–µ–¥–Ω–æ –Ω–∏–≤–æ (1-3 –≥–æ–¥–∏–Ω–∏)</option>
                    <option value="advanced">–ù–∞–ø—Ä–µ–¥–Ω–∞–ª (3-5 –≥–æ–¥–∏–Ω–∏)</option>
                    <option value="expert">–ï–∫—Å–ø–µ—Ä—Ç (–Ω–∞–¥ 5 –≥–æ–¥–∏–Ω–∏)</option>
                </select>
            </div>

            <div class="form-group" id="winolsGroup" style="display: none;">
                <label for="winolsNumber">WinOLS –Ω–æ–º–µ—Ä *</label>
                <input type="text" id="winolsNumber" name="winolsNumber" placeholder="–í—ä–≤–µ–¥–µ—Ç–µ WinOLS –Ω–æ–º–µ—Ä (–Ω–∞–ø—Ä. 12345)">
                <div class="password-requirements">
                    WinOLS –Ω–æ–º–µ—Ä—ä—Ç –µ –∑–∞–¥—ä–ª–∂–∏—Ç–µ–ª–µ–Ω –∑–∞ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –Ω–∞ —Ç—É–Ω–µ—Ä–∏. –¢—Ä—è–±–≤–∞ –¥–∞ –±—ä–¥–µ –≤–∞–ª–∏–¥–µ–Ω –ª–∏—Ü–µ–Ω–∑–∏–æ–Ω–µ–Ω –Ω–æ–º–µ—Ä.
                </div>
            </div>

            <button type="submit" class="register-btn" id="registerBtn">
                –°—ä–∑–¥–∞–π –∞–∫–∞—É–Ω—Ç
            </button>
            
            <div class="loading" id="loading">–°—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ –∞–∫–∞—É–Ω—Ç...</div>
        </form>

        <div class="login-link">
            <p>–í–µ—á–µ –∏–º–∞—Ç–µ –∞–∫–∞—É–Ω—Ç? <a href="/login">–í–ª–µ–∑—Ç–µ —Ç—É–∫</a></p>
        </div>
    </div>

    <script>
        const registerForm = document.getElementById('registerForm');
        const roleSelect = document.getElementById('role');
        const companyGroup = document.getElementById('companyGroup');
        const experienceGroup = document.getElementById('experienceGroup');
        const winolsGroup = document.getElementById('winolsGroup');
        const errorMessage = document.getElementById('errorMessage');
        const successMessage = document.getElementById('successMessage');
        const loading = document.getElementById('loading');
        const registerBtn = document.getElementById('registerBtn');

        // Show/hide additional fields based on role
        roleSelect.addEventListener('change', function() {
            if (this.value === 'tuner') {
                companyGroup.style.display = 'block';
                experienceGroup.style.display = 'block';
                winolsGroup.style.display = 'block';
                document.getElementById('winolsNumber').required = true;
            } else {
                companyGroup.style.display = 'none';
                experienceGroup.style.display = 'none';
                winolsGroup.style.display = 'none';
                document.getElementById('winolsNumber').required = false;
            }
        });

        // Password validation
        function validatePassword(password) {
            const minLength = password.length >= 8;
            const hasUpper = /[A-Z]/.test(password);
            const hasLower = /[a-z]/.test(password);
            const hasNumber = /\d/.test(password);
            
            return minLength && hasUpper && hasLower && hasNumber;
        }

        // Email validation
        function validateEmail(email) {
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return emailRegex.test(email);
        }

        // Show error message
        function showError(message) {
            errorMessage.textContent = message;
            errorMessage.style.display = 'block';
            successMessage.style.display = 'none';
        }

        // Show success message
        function showSuccess(message) {
            successMessage.textContent = message;
            successMessage.style.display = 'block';
            errorMessage.style.display = 'none';
        }

        // Hide messages
        function hideMessages() {
            errorMessage.style.display = 'none';
            successMessage.style.display = 'none';
        }

        registerForm.addEventListener('submit', async function(e) {
            e.preventDefault();
            hideMessages();

            // Get form data
            const formData = new FormData(registerForm);
            const data = {
                firstName: formData.get('firstName').trim(),
                lastName: formData.get('lastName').trim(),
                email: formData.get('email').trim().toLowerCase(),
                phone: formData.get('phone').trim(),
                role: formData.get('role'),
                password: formData.get('password'),
                confirmPassword: formData.get('confirmPassword'),
                company: formData.get('company')?.trim() || '',
                experience: formData.get('experience') || '',
                winolsNumber: formData.get('winolsNumber')?.trim() || ''
            };

            // Validation
            if (!data.firstName || !data.lastName || !data.email || !data.role || !data.password) {
                showError('–ú–æ–ª—è –ø–æ–ø—ä–ª–Ω–µ—Ç–µ –≤—Å–∏—á–∫–∏ –∑–∞–¥—ä–ª–∂–∏—Ç–µ–ª–Ω–∏ –ø–æ–ª–µ—Ç–∞.');
                return;
            }

            // Validate WinOLS number for tuners
            if (data.role === 'tuner' && !data.winolsNumber) {
                showError('WinOLS –Ω–æ–º–µ—Ä—ä—Ç –µ –∑–∞–¥—ä–ª–∂–∏—Ç–µ–ª–µ–Ω –∑–∞ —Ç—É–Ω–µ—Ä–∏.');
                return;
            }

            // Validate WinOLS number format (basic validation)
            if (data.role === 'tuner' && data.winolsNumber) {
                const winolsRegex = /^\d{4,6}$/; // 4-6 digits
                if (!winolsRegex.test(data.winolsNumber)) {
                    showError('WinOLS –Ω–æ–º–µ—Ä—ä—Ç —Ç—Ä—è–±–≤–∞ –¥–∞ —Å—ä–¥—ä—Ä–∂–∞ –º–µ–∂–¥—É 4 –∏ 6 —Ü–∏—Ñ—Ä–∏.');
                    return;
                }
            }

            if (!validateEmail(data.email)) {
                showError('–ú–æ–ª—è –≤—ä–≤–µ–¥–µ—Ç–µ –≤–∞–ª–∏–¥–µ–Ω email –∞–¥—Ä–µ—Å.');
                return;
            }

            if (!validatePassword(data.password)) {
                showError('–ü–∞—Ä–æ–ª–∞—Ç–∞ —Ç—Ä—è–±–≤–∞ –¥–∞ —Å—ä–¥—ä—Ä–∂–∞ –ø–æ–Ω–µ 8 —Å–∏–º–≤–æ–ª–∞, –≤–∫–ª—é—á–∏—Ç–µ–ª–Ω–æ –≥–ª–∞–≤–Ω–∞ –±—É–∫–≤–∞, –º–∞–ª–∫–∞ –±—É–∫–≤–∞ –∏ —Ü–∏—Ñ—Ä–∞.');
                return;
            }

            if (data.password !== data.confirmPassword) {
                showError('–ü–∞—Ä–æ–ª–∏—Ç–µ –Ω–µ —Å—ä–≤–ø–∞–¥–∞—Ç.');
                return;
            }

            // Show loading
            registerBtn.disabled = true;
            loading.style.display = 'block';

            try {
                // Send registration request
                const response = await fetch('https://5000-ifiw4vb9aejz3sovjdosf-09647d20.manusvm.computer/api/auth/register', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        firstName: data.firstName,
                        lastName: data.lastName,
                        email: data.email,
                        phone: data.phone,
                        role: data.role,
                        password: data.password,
                        company: data.company,
                        experience: data.experience
                    })
                });

                const result = await response.json();

                if (response.ok) {
                    showSuccess('–ê–∫–∞—É–Ω—Ç—ä—Ç –µ —Å—ä–∑–¥–∞–¥–µ–Ω —É—Å–ø–µ—à–Ω–æ! –ü—Ä–µ–Ω–∞—Å–æ—á–≤–∞–Ω–µ –∫—ä–º –≤—Ö–æ–¥...');
                    
                    // Clear form
                    registerForm.reset();
                    
                    // Redirect to login after 2 seconds
                    setTimeout(() => {
                        window.location.href = '/login';
                    }, 2000);
                } else {
                    showError(result.message || '–í—ä–∑–Ω–∏–∫–Ω–∞ –≥—Ä–µ—à–∫–∞ –ø—Ä–∏ —Å—ä–∑–¥–∞–≤–∞–Ω–µ—Ç–æ –Ω–∞ –∞–∫–∞—É–Ω—Ç–∞.');
                }
            } catch (error) {
                console.error('Registration error:', error);
                showError('–í—ä–∑–Ω–∏–∫–Ω–∞ –≥—Ä–µ—à–∫–∞ –ø—Ä–∏ —Å–≤—ä—Ä–∑–≤–∞–Ω–µ—Ç–æ —Å—ä—Å —Å—ä—Ä–≤—ä—Ä–∞. –ú–æ–ª—è –æ–ø–∏—Ç–∞–π—Ç–µ –æ—Ç–Ω–æ–≤–æ.');
            } finally {
                registerBtn.disabled = false;
                loading.style.display = 'none';
            }
        });

        // Real-time password validation
        document.getElementById('password').addEventListener('input', function() {
            const password = this.value;
            const requirements = document.querySelector('.password-requirements');
            
            if (password && !validatePassword(password)) {
                requirements.style.color = '#e74c3c';
            } else if (password) {
                requirements.style.color = '#2ecc71';
            } else {
                requirements.style.color = 'rgba(255, 255, 255, 0.8)';
            }
        });

        // Real-time confirm password validation
        document.getElementById('confirmPassword').addEventListener('input', function() {
            const password = document.getElementById('password').value;
            const confirmPassword = this.value;
            
            if (confirmPassword && password !== confirmPassword) {
                this.style.borderColor = '#e74c3c';
            } else if (confirmPassword) {
                this.style.borderColor = '#2ecc71';
            } else {
                this.style.borderColor = 'rgba(255, 255, 255, 0.2)';
            }
        });
    </script>
</body>
</html>

